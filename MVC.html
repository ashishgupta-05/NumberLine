<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      //model
      class NumberLineModel {
        constructor(range, snappingRange, width, height) {
          this.range = range;
          this.snappingRange = snappingRange;
          this.start = 100;
          this.end = width - start;
          this.pointY = height / 2;
          this.pointX = this.mapValueToPixel(0);
        }

        mapValueToPixel(value) {
          return map(value, -this.range, this.range, this.start, this.end);
        }

        mapPixelToValue(value) {
          return map(value, this.start, this.end, -this.range, this.range);
        }

        snapToNearest() {
          const nearestValue = round(this.mapPixelToValue(this.pointX));
          this.pointX = mapValueToPixel(nearestValue);
          return nearestValue;
        }
      }


      //view

      class NumberLineview{

        constructor(model){
            this.model = model;
        }

        drawNumberLine(){

            //straight line on X & Y co-ordinate
            stroke(0);
            strokeWeight(1);
            line(this.model.start, this.model.pointY, this.model.end, this.model.pointY);

            //tick lines and number lable
            for(let i= -this.model.range; i<=this.model.range; i++){
                const x = this.model.mapValueToPixel(i);
                line(x, this.model.pointY - 10, x, this.model.pointY + 10);
                fill(0);
                textAlign(CENTER, CENTER);
                text(i, x, this.model.pointY);
            }

        }

        drawPoint(){
            fill(255, 0, 0);
            noStroke();
            ellipse(this.model.pointX, this.model.pointY);
        }


        nearestValue(nearestValue){
            fill(0);
            textAlign(CENTER, CENTER);
            text(nearestValue, this.model.pointX/2, this.model.pointY - 40)
        }
      }



      //controller

      class NumberLineController{

        constructor(model, view){
            this.model = model;
            this.view = view;
            this.dragged = false;
        }

        handleMousePressed(mouseX, mouseY){
            let d = dist(mouseX, mouseY, this.model.pointX, this.model.pointY);
            if(d < this.model.snappingRange){
                this.dragged = true;
            }
        }

        handleMouseDragged(mouseX){
            if(this.dragged){
                this.model.pointX = constrain(mouseX, this.model.start, this.model.end);
            }
        }

        handleMouseReleased(){
            this.dragged = true;
        }

        //handle reset button to reset to 0
        handleReset(){
            this.model.pointX = this.model.mapValueToPixel(0);
        }

        updateAndDraw(){
            background(200);

        }


      }



      //setup and draw canvas

      let model;
      let view;
      let controller;

      function setup(){
        createCanvas(800, 200);
        //Initialization & constructor call from the setup 
        model = new NumberLineModel(10, 30, width, height);
        view = new NumberLineview(model);
        controller = new NumberLineController(model, view);

        //eventListener for reset button
        const resetButton = document.getElementById("resetButton");
        resetButton.addEventListener("click", () => {
            controller.handleReset();
        });

      }

      function draw(){
        controller.updateAndDraw();
      }

      function mousePressed(){
        controller.handleMousePressed(mouseX, mouseY);
      }

      function mouseDragged(){
        controller.handleMouseDragged(mouseX);
      }

      function mouseReleased(){
        controller.handleMouseReleased();
      }


    </script>
  </head>
  <body>
    <button id="resetButton">Reset to 0</button>
  </body>
</html>
